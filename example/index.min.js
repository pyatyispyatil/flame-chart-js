!function(){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function i(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(Object(i),!0).forEach(function(t){var e,n;e=r,t=i[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})}return r}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){if(null==t)return{};var n,r=function(t,e){if(null==t)return{};for(var n,r={},i=Object.keys(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)n=i[o],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n]);return r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=o(n);return t=r?(t=o(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?u(e):t}}function f(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function t(t,e){return t(e={exports:{}},e.exports),e.exports}var c={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},d=t(function(t){var a=Array.prototype.concat,s=Array.prototype.slice,e=t.exports=function(t){for(var e,n=[],r=0,i=t.length;r<i;r++){var o=t[r];(e=o)&&"string"!=typeof e&&(e instanceof Array||Array.isArray(e)||0<=e.length&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))?n=a.call(n,s.call(o)):n.push(o)}return n};e.wrap=function(t){return function(){return t(e(arguments))}}}),v=t(function(t){var e,n={};for(e in c)c.hasOwnProperty(e)&&(n[c[e]]=e);var r=t.exports={to:{},get:{}};function a(t,e,n){return Math.min(Math.max(e,t),n)}function i(t){t=t.toString(16).toUpperCase();return t.length<2?"0"+t:t}r.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=r.get.hsl(t),n="hsl";break;case"hwb":e=r.get.hwb(t),n="hwb";break;default:e=r.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},r.get.rgb=function(t){if(!t)return null;var e,n,r,i=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var o=2*n;i[n]=parseInt(e.slice(o,2+o),16)}r&&(i[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)i[n]=parseInt(e[n]+e[n],16);r&&(i[3]=parseInt(r+r,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)i[n]=parseInt(e[n+1],0);e[4]&&(i[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(i=c[e[1]])?(i[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(i[3]=parseFloat(e[4]))}for(n=0;n<3;n++)i[n]=a(i[n],0,255);return i[3]=a(i[3],0,1),i},r.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){t=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,a(parseFloat(e[2]),0,100),a(parseFloat(e[3]),0,100),a(isNaN(t)?1:t,0,1)]}return null},r.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){t=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,a(parseFloat(e[2]),0,100),a(parseFloat(e[3]),0,100),a(isNaN(t)?1:t,0,1)]}return null},r.to.hex=function(){var t=d(arguments);return"#"+i(t[0])+i(t[1])+i(t[2])+(t[3]<1?i(Math.round(255*t[3])):"")},r.to.rgb=function(){var t=d(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},r.to.rgb.percent=function(){var t=d(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},r.to.hsl=function(){var t=d(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},r.to.hwb=function(){var t=d(arguments),e="";return 4<=t.length&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},r.to.keyword=function(t){return n[t.slice(0,3)]}});v.to,v.get;var g=t(function(t){var e,s={};for(e in c)c.hasOwnProperty(e)&&(s[c[e]]=e);var n,i=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(n in i)if(i.hasOwnProperty(n)){if(!("channels"in i[n]))throw new Error("missing channels property: "+n);if(!("labels"in i[n]))throw new Error("missing channel labels property: "+n);if(i[n].labels.length!==i[n].channels)throw new Error("channel and label counts mismatch: "+n);var r=i[n].channels,o=i[n].labels;delete i[n].channels,delete i[n].labels,Object.defineProperty(i[n],"channels",{value:r}),Object.defineProperty(i[n],"labels",{value:o})}i.rgb.hsl=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,o=Math.min(n,r,i),a=Math.max(n,r,i),t=a-o;return a===o?e=0:n===a?e=(r-i)/t:r===a?e=2+(i-n)/t:i===a&&(e=4+(n-r)/t),(e=Math.min(60*e,360))<0&&(e+=360),r=(o+a)/2,[e,100*(a===o?0:r<=.5?t/(a+o):t/(2-a-o)),100*r]},i.rgb.hsv=function(t){var e,n,r,i=t[0]/255,o=t[1]/255,a=t[2]/255,s=Math.max(i,o,a),h=s-Math.min(i,o,a),l=function(t){return(s-t)/6/h+.5};return 0==h?n=r=0:(r=h/s,e=l(i),t=l(o),l=l(a),i===s?n=l-t:o===s?n=1/3+e-l:a===s&&(n=2/3+t-e),n<0?n+=1:1<n&&--n),[360*n,100*r,100*s]},i.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[i.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(n,r))),100*(r=1-1/255*Math.max(e,Math.max(n,r)))]},i.rgb.cmyk=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,t=Math.min(1-e,1-n,1-r);return[100*((1-e-t)/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-r-t)/(1-t)||0),100*t]},i.rgb.keyword=function(t){var e=s[t];if(e)return e;var n,r,i,o,a=1/0;for(r in c)c.hasOwnProperty(r)&&(o=c[r],i=t,o=o,(o=Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)+Math.pow(i[2]-o[2],2))<a&&(a=o,n=r));return n},i.keyword.rgb=function(t){return c[t]},i.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,t=t[2]/255;return[100*(.4124*(e=.04045<e?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=.04045<n?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(t=.04045<t?Math.pow((t+.055)/1.055,2.4):t/12.92)),100*(.2126*e+.7152*n+.0722*t),100*(.0193*e+.1192*n+.9505*t)]},i.rgb.lab=function(t){var e=i.rgb.xyz(t),n=e[0],t=e[1],e=e[2];return t/=100,e/=108.883,n=.008856<(n/=95.047)?Math.pow(n,1/3):7.787*n+16/116,[116*(t=.008856<t?Math.pow(t,1/3):7.787*t+16/116)-16,500*(n-t),200*(t-(e=.008856<e?Math.pow(e,1/3):7.787*e+16/116))]},i.hsl.rgb=function(t){var e,n,r=t[0]/360,i=t[1]/100,t=t[2]/100;if(0==i)return[n=255*t,n,n];for(var o,a=2*t-(o=t<.5?t*(1+i):t+i-t*i),s=[0,0,0],h=0;h<3;h++)(e=r+1/3*-(h-1))<0&&e++,1<e&&e--,n=6*e<1?a+6*(o-a)*e:2*e<1?o:3*e<2?a+(o-a)*(2/3-e)*6:a,s[h]=255*n;return s},i.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,t=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=t<=1?t:2-t,[e,100*(0==r?2*i/(t+i):2*n/(r+n)),100*((r+n)/2)]},i.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,t=Math.floor(e)%6,e=e-Math.floor(e),i=255*r*(1-n),o=255*r*(1-n*e),a=255*r*(1-n*(1-e));switch(r*=255,t){case 0:return[r,a,i];case 1:return[o,r,i];case 2:return[i,r,a];case 3:return[i,o,r];case 4:return[a,i,r];case 5:return[r,i,o]}},i.hsv.hsl=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=Math.max(r,.01),t=(2-n)*r,r=(2-n)*i,i=n*i;return[e,100*((i/=r<=1?r:2-r)||0),100*(t/=2)]},i.hwb.rgb=function(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,h=t[2]/100,t=s+h;switch(1<t&&(s/=t,h/=t),a=6*a-(t=Math.floor(6*a)),n=s+(a=0!=(1&t)?1-a:a)*((e=1-h)-s),t){default:case 6:case 0:r=e,i=n,o=s;break;case 1:r=n,i=e,o=s;break;case 2:r=s,i=e,o=n;break;case 3:r=s,i=n,o=e;break;case 4:r=n,i=s,o=e;break;case 5:r=e,i=s,o=n}return[255*r,255*i,255*o]},i.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,t=t[3]/100;return[255*(1-Math.min(1,e*(1-t)+t)),255*(1-Math.min(1,n*(1-t)+t)),255*(1-Math.min(1,r*(1-t)+t))]},i.xyz.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=3.2406*e+-1.5372*n+-.4986*r,t=-.9689*e+1.8758*n+.0415*r,r=.0557*e+-.204*n+1.057*r;return i=.0031308<i?1.055*Math.pow(i,1/2.4)-.055:12.92*i,t=.0031308<t?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=.0031308<r?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(i=Math.min(Math.max(0,i),1)),255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1))]},i.xyz.lab=function(t){var e=t[0],n=t[1],t=t[2];return n/=100,t/=108.883,e=.008856<(e/=95.047)?Math.pow(e,1/3):7.787*e+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(t=.008856<t?Math.pow(t,1/3):7.787*t+16/116))]},i.lab.xyz=function(t){var e=(t[0]+16)/116,n=t[1]/500+e,r=e-t[2]/200,i=Math.pow(e,3),o=Math.pow(n,3),t=Math.pow(r,3);return e=.008856<i?i:(e-16/116)/7.787,n=.008856<o?o:(n-16/116)/7.787,r=.008856<t?t:(r-16/116)/7.787,[n*=95.047,e*=100,r*=108.883]},i.lab.lch=function(t){var e=t[0],n=t[1],r=t[2],t=360*Math.atan2(r,n)/2/Math.PI;return t<0&&(t+=360),[e,Math.sqrt(n*n+r*r),t]},i.lch.lab=function(t){var e=t[0],n=t[1],t=t[2]/360*2*Math.PI;return[e,n*Math.cos(t),n*Math.sin(t)]},i.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],t=1 in arguments?arguments[1]:i.rgb.hsv(t)[2];if(0===(t=Math.round(t/50)))return 30;e=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===t&&(e+=60),e},i.hsv.ansi16=function(t){return i.rgb.ansi16(i.hsv.rgb(t),t[2])},i.rgb.ansi256=function(t){var e=t[0],n=t[1],t=t[2];return e===n&&n===t?e<8?16:248<e?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(t/255*5)},i.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return 50<t&&(e+=3.5),[e=e/10.5*255,e,e];t=.5*(1+~~(50<t));return[(1&e)*t*255,(e>>1&1)*t*255,(e>>2&1)*t*255]},i.ansi256.rgb=function(t){if(232<=t){var e=10*(t-232)+8;return[e,e,e]}return t-=16,[Math.floor(t/36)/5*255,Math.floor((t=t%36)/6)/5*255,t%6/5*255]},i.rgb.hex=function(t){t=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},i.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];t=e[0];3===e[0].length&&(t=t.split("").map(function(t){return t+t}).join(""));t=parseInt(t,16);return[t>>16&255,t>>8&255,255&t]},i.rgb.hcg=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.max(Math.max(e,n),r),o=Math.min(Math.min(e,n),r),t=i-o,o=t<1?o/(1-t):0,n=t<=0?0:i===e?(n-r)/t%6:i===n?2+(r-e)/t:4+(e-n)/t+4;return n/=6,[360*(n%=1),100*t,100*o]},i.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},i.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,e=e*n,n=e<1?(n-e)/(1-e):0;return[t[0],100*e,100*n]},i.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0==n)return[255*r,255*r,255*r];var i=[0,0,0],t=e%1*6,o=t%1,a=1-o;switch(Math.floor(t)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return e=(1-n)*r,[255*(n*i[0]+e),255*(n*i[1]+e),255*(n*i[2]+e)]},i.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),e=0<n?e/n:0;return[t[0],100*e,100*n]},i.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return 0<n&&n<.5?r=e/(2*n):.5<=n&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},i.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},i.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,e=n-e,n=e<1?(n-e)/(1-e):0;return[t[0],100*e,100*n]},i.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},i.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},i.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},i.gray.hsl=i.gray.hsv=function(t){return[0,0,t[0]]},i.gray.hwb=function(t){return[0,100,t[0]]},i.gray.cmyk=function(t){return[0,0,0,t[0]]},i.gray.lab=function(t){return[t[0],0,0]},i.gray.hex=function(t){t=255&Math.round(t[0]/100*255),t=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(t.length)+t},i.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});function m(t){var e=function(){for(var t={},e=Object.keys(g),n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var r=n.pop(),i=Object.keys(g[r]),o=i.length,a=0;a<o;a++){var s=i[a],h=e[s];-1===h.distance&&(h.distance=e[r].distance+1,h.parent=r,n.unshift(s))}return e}function p(t,e){for(var n=[e[t].parent,t],r=g[e[t].parent][t],i=e[t].parent;e[i].parent;)n.unshift(e[i].parent),r=function(e,n){return function(t){return n(e(t))}}(g[e[i].parent][i],r),i=e[i].parent;return r.conversion=n,r}g.rgb,g.hsl,g.hsv,g.hwb,g.cmyk,g.xyz,g.lab,g.lch,g.hex,g.keyword,g.ansi16,g.ansi256,g.hcg,g.apple,g.gray;var y={};function b(e){function t(t){return null==t?t:(1<arguments.length&&(t=Array.prototype.slice.call(arguments)),e(t))}return"conversion"in e&&(t.conversion=e.conversion),t}function w(i){function t(t){if(null==t)return t;1<arguments.length&&(t=Array.prototype.slice.call(arguments));var e=i(t);if("object"==typeof e)for(var n=e.length,r=0;r<n;r++)e[r]=Math.round(e[r]);return e}return"conversion"in i&&(t.conversion=i.conversion),t}Object.keys(g).forEach(function(n){y[n]={},Object.defineProperty(y[n],"channels",{value:g[n].channels}),Object.defineProperty(y[n],"labels",{value:g[n].labels});var r=function(t){for(var e=m(t),n={},r=Object.keys(e),i=r.length,o=0;o<i;o++){var a=r[o];null!==e[a].parent&&(n[a]=p(a,e))}return n}(n);Object.keys(r).forEach(function(t){var e=r[t];y[n][t]=w(e),y[n][t].raw=b(e)})});var k=y,x=[].slice,M=["keyword","gray","hex"],R={};Object.keys(k).forEach(function(t){R[x.call(k[t].labels).sort().join("")]=t});var O={};function E(t,e){if(!(this instanceof E))return new E(t,e);if((e=e&&e in M?null:e)&&!(e in k))throw new Error("Unknown model: "+e);if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof E)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var n=v.get(t);if(null===n)throw new Error("Unable to parse color from string: "+t);this.model=n.model,r=k[this.model].channels,this.color=n.value.slice(0,r),this.valpha="number"==typeof n.value[r]?n.value[r]:1}else if(t.length){this.model=e||"rgb";var r=k[this.model].channels,i=x.call(t,0,r);this.color=L(i,r),this.valpha="number"==typeof t[r]?t[r]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;i=Object.keys(t);"alpha"in t&&(i.splice(i.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);i=i.sort().join("");if(!(i in R))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=R[i];for(var o=k[this.model].labels,a=[],s=0;s<o.length;s++)a.push(t[o[s]]);this.color=L(a)}if(O[this.model])for(r=k[this.model].channels,s=0;s<r;s++){var h=O[this.model][s];h&&(this.color[s]=h(this.color[s]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function n(n,r,i){return(n=Array.isArray(n)?n:[n]).forEach(function(t){(O[t]||(O[t]=[]))[r]=i}),n=n[0],function(t){var e;return arguments.length?(i&&(t=i(t)),(e=this[n]()).color[r]=t,e):(e=this[n]().color[r],e=i?i(e):e)}}function P(e){return function(t){return Math.max(0,Math.min(e,t))}}function L(t,e){for(var n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}E.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in v.to?this:this.rgb(),t=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return v.to[e.model](t)},percentString:function(t){t=this.rgb().round("number"==typeof t?t:1),t=1===t.valpha?t.color:t.color.concat(this.valpha);return v.to.rgb.percent(t)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=k[this.model].channels,n=k[this.model].labels,r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new E(this.color.map((n=t,function(t){return e=n,Number(t.toFixed(e));var e})).concat(this.valpha),this.model);var n},alpha:function(t){return arguments.length?new E(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:n("rgb",0,P(255)),green:n("rgb",1,P(255)),blue:n("rgb",2,P(255)),hue:n(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:n("hsl",1,P(100)),lightness:n("hsl",2,P(100)),saturationv:n("hsv",1,P(100)),value:n("hsv",2,P(100)),chroma:n("hcg",1,P(100)),gray:n("hcg",2,P(100)),white:n("hwb",1,P(100)),wblack:n("hwb",2,P(100)),cyan:n("cmyk",0,P(100)),magenta:n("cmyk",1,P(100)),yellow:n("cmyk",2,P(100)),black:n("cmyk",3,P(100)),x:n("xyz",0,P(100)),y:n("xyz",1,P(100)),z:n("xyz",2,P(100)),l:n("lab",0,P(100)),a:n("lab",1),b:n("lab",2),keyword:function(t){return arguments.length?new E(t):k[this.model].keyword(this.color)},hex:function(t){return arguments.length?new E(t):v.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((.055+r)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),t=t.luminosity();return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)},level:function(t){t=this.contrast(t);return 7.1<=t?"AAA":4.5<=t?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,t=.3*t[0]+.59*t[1]+.11*t[2];return E.rgb(t,t,t)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),n=e.color[0];return n=(n=(n+t)%360)<0?360+n:n,e.color[0]=n,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var n=t.rgb(),r=this.rgb(),i=void 0===e?.5:e,t=2*i-1,e=n.alpha()-r.alpha(),t=(1+(t*e==-1?t:(t+e)/(1+t*e)))/2,e=1-t;return E.rgb(t*n.red()+e*r.red(),t*n.green()+e*r.green(),t*n.blue()+e*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(k).forEach(function(n){var r;-1===M.indexOf(n)&&(r=k[n].channels,E.prototype[n]=function(){if(this.model===n)return new E(this);if(arguments.length)return new E(arguments,n);var t,e="number"==typeof arguments[r]?r:this.valpha;return new E((t=k[this.model][n].raw(this.color),(Array.isArray(t)?t:[t]).concat(e)),n)},E[n]=function(t){return new E(t="number"==typeof t?L(x.call(arguments),r):t,n)})});var T=E;function j(){}function S(){S.init.call(this)}function H(t){return void 0===t._maxListeners?S.defaultMaxListeners:t._maxListeners}function C(t,e,n,r){var i,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');return(i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener||n),i=t._events),o=i[e]):(i=t._events=new j,t._eventsCount=0),o?("function"==typeof o?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),o.warned||(r=H(t))&&0<r&&o.length>r&&(o.warned=!0,(r=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",r.emitter=t,r.type=e,r.count=o.length,r=r,"function"==typeof console.warn?console.warn(r):console.log(r))):(o=i[e]=n,++t._eventsCount),t}function D(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function _(t){var e=this._events;if(e){t=e[t];if("function"==typeof t)return 1;if(t)return t.length}return 0}function A(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function z(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;t.forEach(function(t){e(t,n),t.children&&z(t.children,e,n+1)})}function B(r,t,i,o){var e=W(t),a=t-(e=e||(t?1:0)),s=i,h=0;return new Array(e).fill(null).map(function(){var t,e=s+h+W(o-h-(s-i)),n=W(o-(e-i),1);return h=n,s=e,a&&r&&(t=B(r-1,a,e,n),a-=t.length),{name:function(t){var e="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM",t=W(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:4);return Array(t).fill(null).map(function(){return e[W(e.length)]}).join("")}(10),start:e,duration:n,children:t}})}function F(){return B(nt,et,tt,Q)}j.prototype=Object.create(null),(S.EventEmitter=S).usingDomains=!1,S.prototype.domain=void 0,S.prototype._events=void 0,S.prototype._maxListeners=void 0,S.defaultMaxListeners=10,S.init=function(){this.domain=null,S.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new j,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},S.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},S.prototype.getMaxListeners=function(){return H(this)},S.prototype.emit=function(t){var e,n,r,i="error"===t,o=this._events;if(o)i=i&&null==o.error;else if(!i)return!1;if(a=this.domain,i){if(i=arguments[1],a)return(i=i||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,i.domain=a,i.domainThrown=!1,a.emit("error",i),!1;if(i instanceof Error)throw i;var a=new Error('Uncaught, unspecified "error" event. ('+i+")");throw a.context=i,a}if(!(e=o[t]))return!1;var s,h="function"==typeof e;switch(s=arguments.length){case 1:!function(t,e){if(h)t.call(e);else for(var n=t.length,r=A(t,n),i=0;i<n;++i)r[i].call(e)}(e,this);break;case 2:!function(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=A(t,i),a=0;a<i;++a)o[a].call(n,r)}(e,h,this,arguments[1]);break;case 3:!function(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=A(t,o),s=0;s<o;++s)a[s].call(n,r,i)}(e,h,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,s=A(t,a),h=0;h<a;++h)s[h].call(n,r,i,o)}(e,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(s-1),r=1;r<s;r++)n[r-1]=arguments[r];!function(t,e,n){if(h)t.apply(e,n);else for(var r=t.length,i=A(t,r),o=0;o<r;++o)i[o].apply(e,n)}(e,this,n)}return!0},S.prototype.addListener=function(t,e){return C(this,t,e,!1)},S.prototype.on=S.prototype.addListener,S.prototype.prependListener=function(t,e){return C(this,t,e,!0)},S.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,D(this,t,e)),this},S.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,D(this,t,e)),this},S.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new j:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length;0<o--;)if(n[o]===e||n[o].listener&&n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new j,this;delete r[t]}else!function(t){for(var e=i,n=e+1,r=t.length;n<r;e+=1,n+=1)t[e]=t[n];t.pop()}(n);r.removeListener&&this.emit("removeListener",t,a||e)}return this},S.prototype.removeAllListeners=function(t){var e,n=this._events;if(!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=new j,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new j:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new j,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(;this.removeListener(t,e[e.length-1]),e[0];);return this},S.prototype.listeners=function(t){var e=this._events,n=e&&(n=e[t])?"function"==typeof n?[n.listener||n]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(n):[];return n},S.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):_.call(t,e)},S.prototype.listenerCount=_,S.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var I=function(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},N=15,U="12px",X=T.hsl(180,30,70),q=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,S);var t,e,n,l=h(c);function c(t){var e=t.canvas,n=t.width,r=void 0===n?e.width:n,i=t.height,o=void 0===i?e.height:i,a=t.data,s=t.colors,h=void 0===s?{}:s,n=t.timestamps,i=void 0===n?[]:n,s=t.font,n=void 0===s?U:s,s=t.nodeHeight,t=void 0===s?N:s;return function(t){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),(s=l.call(this)).timelineStart=0,s.timelineEnd=0,s.timelineDimension=0,s.timelineDelta=0,s.charWidth=0,s.charHeight=0,s.positionY=0,s.positionX=0,s.zoom=0,s.mouse={x:0,y:0},s.colors={},s.lastRandomColor=X,s.width=r,s.height=o,s.selectedRegion=null,s.hoveredRegion=null,s.font=n,s.nodeHeight=t,s.ctx=e.getContext("2d"),s.canvas=e,s.userColors=h,s.pixelRatio=I(s.ctx),s.setTimestamps(i,!1),s.setData(a,!1),s.handleMouseWheel=s.handleMouseWheel.bind(u(s)),s.handleMouseDown=s.handleMouseDown.bind(u(s)),s.handleMouseUp=s.handleMouseUp.bind(u(s)),s.handleMouseUp=s.handleMouseUp.bind(u(s)),s.handleMouseMove=s.handleMouseMove.bind(u(s)),s.init(),s}return t=c,(e=[{key:"init",value:function(){var t,e;this.ctx&&(this.fixBlurryFont(),e=(t=this.ctx.measureText("w")).fontBoundingBoxAscent,this.blockPadding=Math.ceil((this.nodeHeight-(e+t.fontBoundingBoxDescent))/2+t.fontBoundingBoxDescent),this.charWidth=t.width,this.charHeight=e+t.fontBoundingBoxDescent,this.headerHeight=this.nodeHeight+this.charHeight+this.blockPadding,this.ctx.font=this.font,this.initView(),this.initListeners(),this.render())}},{key:"fixBlurryFont",value:function(){this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"destroy",value:function(){this.removeListeners()}},{key:"setData",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.data=t,e&&this.update()}},{key:"setTimestamps",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.timestamps=t.map(function(t){var e=t.color;return i(i({},s(t,["color"])),{},{color:new T(e).alpha(.7).rgb().toString()})}),e&&this.update()}},{key:"update",value:function(){this.calcView(),this.render()}},{key:"calcView",value:function(){this.calcMinMax(),0<this.max-this.min?this.initialZoom=this.width/(this.max-this.min):this.initialZoom=1}},{key:"resetView",value:function(){this.zoom=this.initialZoom,this.positionX=this.min}},{key:"initView",value:function(){this.calcView(),this.resetView()}},{key:"initListeners",value:function(){this.canvas&&(this.canvas.addEventListener("wheel",this.handleMouseWheel),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("mouseup",this.handleMouseUp),this.canvas.addEventListener("mouseleave",this.handleMouseUp),this.canvas.addEventListener("mousemove",this.handleMouseMove))}},{key:"removeListeners",value:function(){this.canvas&&(this.canvas.removeEventListener("wheel",this.handleMouseWheel),this.canvas.removeEventListener("mousedown",this.handleMouseDown),this.canvas.removeEventListener("mouseup",this.handleMouseUp),this.canvas.removeEventListener("mouseleave",this.handleMouseUp),this.canvas.removeEventListener("mousemove",this.handleMouseMove))}},{key:"handleMouseWheel",value:function(t){var e=t.deltaY,n=t.deltaX;t.preventDefault();t=this.calcRealView(),n/=this.zoom,e=e/1e3*this.zoom;this.tryToChangePosition(n),0!==(e=this.zoom-e>=this.initialZoom?e:this.zoom-this.initialZoom)&&(n=this.mouse.x/this.width,n=(t-this.width/(this.zoom-e))*n,this.zoom-=e,this.tryToChangePosition(n)),this.render()}},{key:"handleMouseDown",value:function(){this.moveActive=!0,this.mouseClickStartPosition={x:this.mouse.x,y:this.mouse.y}}},{key:"handleMouseUp",value:function(){this.moveActive=!1,this.mouseClickStartPosition&&this.mouseClickStartPosition.x===this.mouse.x&&this.mouseClickStartPosition.y===this.mouse.y&&this.handleRegionHit(this.mouse.x,this.mouse.y)}},{key:"handleMouseMove",value:function(t){var e,n;this.moveActive&&(e=this.mouse.y-t.offsetY,n=(this.mouse.x-t.offsetX)/this.zoom,this.tryToChangePosition(n),0<=this.positionY+e?this.positionY+=e:this.positionY=0),this.mouse.x=t.offsetX,this.mouse.y=t.offsetY;t=this.hoveredRegion;this.checkRegionHover(),(this.moveActive||this.hoveredRegion||t&&!this.hoveredRegion)&&this.render()}},{key:"tryToChangePosition",value:function(t){var e=this.calcRealView();this.positionX+t+e<=this.max&&this.positionX+t>=this.min?this.positionX+=t:this.positionX+t<=this.min?this.positionX=this.min:this.positionX+t+e>=this.max&&(this.positionX=this.max-e)}},{key:"calcRealView",value:function(){return this.width/this.zoom}},{key:"calcTimeline",value:function(){var t=this.max-this.min,e=t/(this.width/90),n=this.calcRealView(),t=n/(t||1);this.timelineDelta=e/Math.pow(2,Math.floor(Math.log2(1/t))),this.timelineStart=Math.floor((this.positionX-this.min)/this.timelineDelta),this.timelineEnd=Math.ceil(n/this.timelineDelta)+this.timelineStart;n=3-Math.ceil(10*this.timelineDelta).toString().length;this.timelineDimension=0<n?n:0}},{key:"calcMinMax",value:function(){var t=this.data,e=this.timestamps,n=!0,r=0,i=0;z(t,function(t){var e=t.start,t=t.duration;n?(i=(r=e)+t,n=!1):(r=r<e?r:e,i=e+t<i?i:e+t)}),this.min=e.reduce(function(t,e){e=e.timestamp;return e<t?e:t},r),this.max=e.reduce(function(t,e){e=e.timestamp;return t<e?e:t},i)}},{key:"clearHitRegions",value:function(){this.hitRegions=[]}},{key:"addHitRegion",value:function(t,e,n,r,i,o){this.hitRegions.push({type:t,data:e,x:n,y:r,w:i,h:o})}},{key:"handleRegionHit",value:function(t,e){this.selectedRegion=this.getHoveredRegion(t,e),this.render(),this.selectedRegion&&"node"===this.selectedRegion.type&&this.handleNodeSelect(this.selectedRegion&&this.selectedRegion.data)}},{key:"handleNodeSelect",value:function(t){this.emit("select",t)}},{key:"checkRegionHover",value:function(){this.hoveredRegion=this.getHoveredRegion(this.mouse.x,this.mouse.y)}},{key:"getHoveredRegion",value:function(i,o){return this.hitRegions.find(function(t){var e=t.x,n=t.y,r=t.w,t=t.h;return e<=i&&i<=e+r&&n<=o&&o<=n+t})}},{key:"getColor",value:function(t,e){if(e)return e;if(this.colors[t])return this.colors[t];if(this.userColors[t]){e=new T(this.userColors[t]);return this.colors[t]=e.rgb().toString(),this.colors[t]}return this.lastRandomColor=this.lastRandomColor.rotate(10),this.colors[t]=this.lastRandomColor.rgb().toString(),this.colors[t]}},{key:"calcRect",value:function(t,e,n){return{x:this.timeToPosition(t),y:n*this.nodeHeight+ +n-this.positionY+this.headerHeight,w:e*this.zoom-1}}},{key:"timeToPosition",value:function(t){return t*this.zoom-this.positionX*this.zoom}},{key:"renderChart",value:function(){var a,t,e,n,s=this;z(this.data,function(t,e){var n=t.start,r=t.duration,i=t.name,o=t.type,n=s.calcRect(n,r,e),r=n.x,e=n.y,n=n.w;0<r+n&&r<s.width&&0<e+s.nodeHeight&&e<s.height&&(s.addHitRegion("node",t,r,e,n,s.nodeHeight),s.renderRect(s.getColor(o,t.color),i,r,e,n),s.selectedRegion&&t===s.selectedRegion.data&&(a={x:r,y:e,w:n}))}),a&&(t=a.x,e=a.y,n=a.w,this.renderStroke(t,e,n,this.nodeHeight))}},{key:"renderTimestamps",value:function(){var s=this;this.ctx.clearRect(0,0,this.width,this.charHeight),this.timestamps.slice().sort(function(t,e){return t.timestamp-e.timestamp}).reduce(function(t,e){var n=e.timestamp,r=e.color,i=e.shortName,o=s.ctx.measureText(i).width,a=o+2*s.blockPadding,n=s.timeToPosition(n),o=s.calcTimestampBlockPosition(n,t,o);return s.ctx.strokeStyle=r,s.ctx.beginPath(),s.ctx.setLineDash([8,7]),s.ctx.moveTo(n,0),s.ctx.lineTo(n,s.height),s.ctx.stroke(),s.ctx.fillStyle=r,s.ctx.fillRect(o,s.charHeight,a,s.charHeight+s.blockPadding),s.ctx.fillStyle="black",s.ctx.fillText(i,o+s.blockPadding,2*s.charHeight),s.addHitRegion("timestamp",e,o,s.charHeight,a,s.charHeight+s.blockPadding),o+a},0)}},{key:"calcTimestampBlockPosition",value:function(t,e){return 0<t&&t<e?e:t}},{key:"forEachTime",value:function(t){for(var e=this.timelineStart;e<=this.timelineEnd;e++){var n=e*this.timelineDelta+this.min;t(this.timeToPosition(n.toFixed(this.timelineDimension)),n)}}},{key:"renderLines",value:function(e,n){var r=this;this.ctx.fillStyle="rgb(126, 126, 126, 0.5)",this.forEachTime(function(t){r.ctx.fillRect(t,e,1,n)})}},{key:"renderTimes",value:function(){var n=this;this.ctx.clearRect(0,0,this.width,this.charHeight),this.ctx.fillStyle="black",this.forEachTime(function(t,e){n.ctx.fillText(e.toFixed(n.timelineDimension)+"ms",t+n.blockPadding,n.charHeight-4)}),this.ctx.fillStyle="rgb(126,126,126, 0.5)",this.forEachTime(function(t){n.ctx.fillRect(t,0,1,n.charHeight)})}},{key:"renderStroke",value:function(t,e,n,r){this.ctx.setLineDash([]),this.ctx.strokeStyle="green",this.ctx.strokeRect(t,e,n,r)}},{key:"renderRect",value:function(t,e,n,r,i){this.ctx.fillStyle=t,this.ctx.fillRect(n,r,i,this.nodeHeight),!e||0<(i=i-(2*this.blockPadding-(n<0?n:0)))&&(e=e.length*this.charWidth>i?0<(i=(Math.floor(i/this.charWidth)-1)/2)?e.slice(0,Math.ceil(i))+"â€¦"+e.slice(e.length-Math.floor(i),e.length):"":e)&&(this.ctx.fillStyle="black",this.ctx.fillText(e,(n<0?0:n)+this.blockPadding,r+this.nodeHeight-this.blockPadding))}},{key:"renderTooltip",value:function(){if(this.hoveredRegion)switch(this.hoveredRegion.type){case"node":this.renderNodeTooltip();break;case"timestamp":this.renderTimestampTooltip()}}},{key:"renderTimestampTooltip",value:function(){var t,e;this.hoveredRegion&&(t=(e=this.hoveredRegion.data).fullName,e=e.timestamp,t="".concat(t),e="".concat(e.toFixed(2)," ms"),this.renderTooltipFromData(t,[e]))}},{key:"renderNodeTooltip",value:function(){var t,e,n,r,i;this.hoveredRegion&&(i=(r=this.hoveredRegion.data).start,t=r.duration,e=r.children,n=r.name,r=t-(e?e.reduce(function(t,e){return t+e.duration},0):0),n="".concat(n),r="duration: ".concat(t.toFixed(2)," ms ").concat(e&&e.length?"(self ".concat(r.toFixed(2)," ms)"):""),i="start: ".concat(i.toFixed(2)),this.renderTooltipFromData(n,[r,i]))}},{key:"renderTooltipFromData",value:function(t,e){var n=this,r=this.mouse.x+10,i=this.mouse.y+10,o=[t].concat(f(e)).map(function(t){return n.ctx.measureText(t)}).reduce(function(t,e){e=e.width;return Math.max(t,e)},0)+2*this.blockPadding;this.ctx.shadowColor="black",this.ctx.shadowBlur=5,this.ctx.fillStyle="white",this.ctx.fillRect(r,i,o+2*this.blockPadding,this.charHeight*(e.length+1)+2*this.blockPadding),this.ctx.shadowColor=null,this.ctx.shadowBlur=null,this.ctx.fillStyle="black",this.ctx.fillText(t,r+this.blockPadding,i+this.nodeHeight-this.blockPadding),this.ctx.fillStyle="#688f45",e.forEach(function(t,e){e+=1;n.ctx.fillText(t,r+n.blockPadding,i+n.nodeHeight-n.blockPadding+(n.charHeight+2)*e)})}},{key:"render",value:function(){var t=this;requestAnimationFrame(function(){t.ctx.clearRect(0,0,t.width,t.height),t.clearHitRegions(),t.calcTimeline(),t.renderLines(0,t.height),t.renderChart(),t.ctx.clearRect(0,0,t.width,t.headerHeight),t.renderLines(0,t.headerHeight),t.renderTimestamps(),t.renderTimes(),t.renderTooltip()})}}])&&r(t.prototype,e),n&&r(t,n),c}(),W=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(t-e))+e},V=document.getElementById("root"),Y=document.getElementById("selected-node"),$=document.getElementById("button"),Z=document.getElementById("start"),J=document.getElementById("duration"),K=document.getElementById("count"),G=document.getElementById("levels"),Q=5e3,tt=500,et=500,nt=10;V.width=window.innerWidth-40,V.height=window.innerHeight/2;var rt=new q({canvas:V,data:F(),timestamps:[{shortName:"DCL",fullName:"DOMContentLoaded",timestamp:2e3,color:"#d7c44c"},{shortName:"LE",fullName:"LoadEvent",timestamp:2100,color:"#4fd24a"},{shortName:"TTI",fullName:"Time To Interactive",timestamp:3e3,color:"#4b7ad7"}],colors:{task:"#696969",event:"#a4775b"}});rt.on("select",function(t){Y.innerHTML=t?JSON.stringify(i(i({},t),{},{end:t.start+t.duration,children:void 0}),null,"  "):""}),window.addEventListener("resize",function(){V.width=window.innerWidth-40,V.height=window.innerHeight/2,rt.update()}),$.addEventListener("click",function(){rt.setData(F())}),Z.value=tt,J.value=Q,K.value=et,G.value=nt,Z.addEventListener("change",function(t){return tt=parseInt(t.target.value)}),J.addEventListener("change",function(t){return Q=parseInt(t.target.value)}),K.addEventListener("change",function(t){return et=parseInt(t.target.value)}),G.addEventListener("change",function(t){return nt=parseInt(t.target.value)})}();
